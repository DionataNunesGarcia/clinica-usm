<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <title>USM - Cadastro Dependentes</title>
        <h:outputStylesheet library="CSS" name="bootstrap-responsive.css"/>
        <h:outputStylesheet library="CSS" name="bootstrap-responsive.min.css"/>
        <h:outputStylesheet library="CSS" name="bootstrap.css"/>
        <h:outputStylesheet library="CSS" name="bootstrap.min.css"/>
        <h:outputStylesheet library="CSS" name="stylesCSS.css"/>
        <h:outputStylesheet library="CSS" name="stylesForm.css"/>
        <h:outputStylesheet library="CSS" name="stylesMenu.css"/>
        <h:outputStylesheet library="CSS" name="stylesTabelas.css"/>
        <h:outputStylesheet library="calendario" name="calendario.css"/>
        <h:outputScript library="JavaScript" name="ValidaCPF.js"/>
        <h:outputScript library="JavaScript" name="ocultardivs.js"/>
        <script src="calendario/jquery-1.9.1.js" />
        <script src="calendario/calendario.js" />
        <script src="calendario/datepicker.js"/>
    </h:head>
    <h:body>
        <ui:include src="menuAdmin.xhtml"/>
        <br/><br/>
        <div class="form" align="center">
            <h2>Dependentes Por Clientes</h2>
            <br/>
            <br/>


            <h:form id="form1" class="form-search" prependId="false">
                <h:panelGrid columns="3">

                    <h3>Selecione o Cliente: </h3>

                    <h:selectOneMenu class="input-large"  value="#{dependentesMB.dependentes.cliente}" converter="conversorCliente">                      

                        <f:selectItems value="#{dependentesMB.clientes}" var="cat" itemLabel="#{cat.nome}" itemValue="#{cat}"/>                        
                        <f:ajax execute="@form form1" render="pg" listener="#{dependentesMB.metodoAjax()}"/>

                    </h:selectOneMenu>

                </h:panelGrid>
                <br/>   
                <br/>
                <br/>
                <h:panelGroup id="pg">
                    <h:dataTable value="#{dependentesMB.dependentesLista}" var="var" styleClass="tabela"
                                 headerClass="cabecalho"  rowClasses="ultimo, primeiro">
                        <f:facet name="caption">Lista Dependentes Por Cliente</f:facet>


                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="ID"/>
                            </f:facet>
                            <h:outputText value="#{u.iddependentes}"/>
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="NOME"/>
                            </f:facet>
                            <h:outputText value="#{u.nome}"/> 
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="DATA NASCIMENTO"/>
                            </f:facet>
                            <h:outputText value="#{u.data_nascimento}">
                                <f:convertDateTime pattern="dd/MM/yyy"/>
                            </h:outputText>  

                        </h:column>


                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="CPF"/>
                            </f:facet>
                            <h:outputText value="#{u.cpf}"/> 

                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                <h:outputText value="SEXO"/>
                            </f:facet>
                            <h:outputText value="#{u.sexo}"/> 

                        </h:column>



                    </h:dataTable>
                </h:panelGroup>

                <br />                

            </h:form>           

        </div>

    </h:body>
</html>

